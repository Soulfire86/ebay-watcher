<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>@ViewData["Title"] - eBay Watcher</title>

        <environment names="Development">
            <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.css" />
        </environment>
        <environment names="Staging,Production">
            <link rel="stylesheet" href="//ajax.aspnetcdn.com/ajax/bootstrap/3.0.0/css/bootstrap.min.css"
                  asp-fallback-href="~/lib/bootstrap/css/bootstrap.min.css"
                  asp-fallback-test-class="hidden" asp-fallback-test-property="visibility" asp-fallback-test-value="hidden" />
        </environment>

        <link rel="stylesheet" href="~/css/site.css" asp-file-version="true" />

    </head>
    <body ng-app="eBayWatcher">
        <div class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <a href="/" class="navbar-brand">eBay Watcher</a>
                </div>
            </div>
        </div>
        <div class="container body-content">
            @RenderBody()
        </div>

        <div ng-controller="CategorySearchController" ng-cloak>

            @* Using simple dialog: https://gist.github.com/mattmeisinger/de693d6e93602c1ea442 *@
            <div class="modal-window-backdrop" ng-show="visible" ng-click="backdropClicked()">
                <div class="modal-window-content" ng-click="contentClicked($event)">
                    <h3>Find Category</h3>
                    <form ng-submit="search()">
                        Search:
                        <input type="text" ng-model="searchTerm" id="categorySearchBox" />
                        <button class="btn btn-success" ng-disabled="loading">Search</button>
                    </form>
                    <div style="padding-top: 10px;" ng-show="loading">
                        Searching eBay categories...
                    </div>
                    <div style="padding-top: 10px;" ng-show="searched && !loading">
                        <div>Found {{results.length}} results.</div>
                        <div ng-repeat="r in results">
                            <span ng-repeat="p in r.Parents">
                                <a href="" ng-click="selectItem(p)">{{p.Name}}</a>
                                <span> > </span>
                            </span>

                            <a href="" ng-click="selectItem(r)">{{r.Name}}</a>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <script src="~/lib/angular/angular.js" asp-file-version="true"></script>
        <script src="~/lib/jquery/dist/jquery.js" asp-file-version="true"></script>
        <script src="~/lib/bootstrap/dist/js/bootstrap.js" asp-file-version="true"></script>
        <script src="~/lib/underscore/underscore.js" asp-file-version="true"></script>

        <script src="~/js/app.js" asp-file-version="true"></script>
        <script src="~/js/services/DataService.js" asp-file-version="true"></script>
        <script src="~/js/Controllers/AccountController.js" asp-file-version="true"></script>
        <script src="~/js/Controllers/CategorySearchController.js" asp-file-version="true"></script>
        <script src="~/js/Controllers/MyListController.js" asp-file-version="true"></script>
        <script src="~/js/Controllers/SearchController.js" asp-file-version="true"></script>
        <script src="~/js/Controllers/UpdateItemController.js" asp-file-version="true"></script>

        @RenderSection("scripts", required: false)
    </body>
</html>
